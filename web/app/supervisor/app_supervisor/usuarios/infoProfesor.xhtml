<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Supervisor - informacion alumno</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <ui:include src="../../../../WEB-INF/supervisor/link_estilos.xhtml"/>

        <link href="../../../../resources/datatable/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css"/>

        <script src="../../../../resources/datatable/js/jquery.dataTables.min.js" type="text/javascript"></script>
        <script src="../../../../resources/datatable/js/activartabla.js" type="text/javascript"></script>

        <f:event type="preRenderView" listener="#{loginController.verificarSession2()}"/>
    </h:head>

    <f:view locale="es">

        <h:body>

            <!-- Encabezado -->
            <div></div>

            <!-- NAVEGADOR -->
            <ui:include src="../../../../WEB-INF/supervisor/nav/nav_sup_sec.xhtml"/>

            <!-- Formulario de creacion de categoria deportiva -->
            <h:form class="container w-100 mt-5 mb-4 mr-0">

                <!--Boton de migaja de pan-->
                <div class="card col-12 col-xl-11 mx-auto p-0">
                    <div class="card-header col-12 p-0 pl-1">
                        <h:commandLink value="#{textSupp.profesor}" action="listarProfesores"/>
                        >
                        <h:commandLink class="text-secondary" value="#{textSupp.infoPro}" 
                                       action="#{usuariosController.buscarProfesor(usuariosController.profesor.idProfesor, usuariosController.profesor.documento.documento)}"/>
                    </div>
                </div>

                <div class="row text-center bg-white col-xl-11 mx-auto">
                    <h1 class="col-12 pl-4 mt-2 mb-2">
                        #{textSupp.infoProfesor} #{usuariosController.usuarios.nombre1} #{usuariosController.usuarios.apellido1}
                    </h1>
                </div>

                <div class="card col-12 col-xl-11 mx-auto pl-3 pr-3">

                    <div class="row">

                        <h:inputHidden id="doc" value="#{usuariosController.usuarios.documento}"/>
                        <h:message for="doc" showDetail="true"/>
                        <h:inputHidden id="alum" value="#{usuariosController.profesor.idProfesor}"/>
                        <h:message for="alum" showDetail="true"/>

                        <!-- Informacion del profesor acargo -->
                        <div class="card-header col-12 text-center mb-3 ">

                            <h:outputLabel value="#{textSupp.fotoPerfil}" class=" col-12 text-primary"/>

                        </div>

                        <!-- Foto de perfil del usuario-->
                        <div class="col-12 mb-3">
                            <div class="col-12 col-lg-3 mx-auto ">
                                <h:graphicImage value="#{usuariosController.usuarios.fotoPerfil}" class="w-100 col-12 images-circular"/>
                            </div>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.documentoI}: " class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.profesor.documento.documento}
                                           "/>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.nombre}: " class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.profesor.documento.nombre1}
                                           #{usuariosController.profesor.documento.nombre2}
                                           "/>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.apellidoUsu}: " class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.profesor.documento.apellido1}
                                           #{usuariosController.profesor.documento.apellido2}
                                           "/>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.fechaNacimiento}:" class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="#{usuariosController.profesor.documento.fechaNacimiento}">
                                <f:convertDateTime pattern="yyyy-MM-dd"/>
                            </h:outputLabel>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.eps}:" class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.profesor.documento.idEps.nombreEps}
                                           "/>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.tipoSangre}: " class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.profesor.documento.idtipoSangre.rh}
                                           "/>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.Especialidad}: " class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.profesor.idEspecialidad.nombreEspecialidad}
                                           "/>
                        </div>



                        <!-- Informacion de la categoria deportiva -->
                        <div class="card-header col-12 text-center mb-3 ">

                            <h:outputLabel value="#{textSupp.categoriaDeportiva}" class=" col-12 text-danger"/>

                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.categoriaDeportiva}:" class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.buscarCategoria(usuariosController.profesor.idProfesor)}
                                           "/>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.nivelCategoria}:" class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.buscarNivel(usuariosController.profesor.idProfesor)}
                                           "/>
                        </div>

                        <div class="col-md-6 col-xl-4 mb-3">

                            <h:outputLabel value="#{textSupp.estado}:" class="col-md-6 col-12 text-danger"/>

                            <h:outputLabel class="col-md-6 col-12" 
                                           value="
                                           #{usuariosController.profesor.documento.idEstadoUsuario.estado}
                                           "/>
                        </div>

                        <div class="col-12 text-center mb-3 p-0">

                            <h:commandLink value="#{textSupp.desactivar}" class="m-1 btn btn-warning" 
                                           actionListener="#{usuariosController.desactivarUsuarioPro()}"
                                           />  

                            <h:commandButton a:type="button" value="#{textSupp.modificar}" class="btn btn-success" a:data-toggle="modal" a:data-target="#modificar"
                                             actionListener="#{usuariosController.consultarUsuario(usuariosController.usuarios.documento, usuariosController.profesor.idProfesor)}"
                                             />

                        </div>


                        <!-- Lista de alumnos del profesor -->
                        <div class="card-header col-12 text-center mb-3 ">

                            <h:outputLabel value="#{textSupp.AlumnosProfe}" class=" col-12 text-danger"/>

                        </div>

                        <!--Lista de todos los alumnos del profesor-->
                        <div class="col-12">

                            <div class="p-3 w-100">

                                <h:dataTable id="alumnos" 
                                             value="#{usuariosController.listarAlumnosProfesorSup(usuariosController.profesor.idProfesor)}" 
                                             var="alumnos" styleClass="stripe alumnos w-100 table-success"

                                             >

                                    <h:column>

                                        <f:facet name="header">#{textSupp.documentoI}</f:facet>

                                        <h:outputLabel value="#{alumnos.documento.documento} "/>

                                    </h:column>

                                    <h:column>

                                        <f:facet name="header">#{textSupp.nombreUsu}</f:facet>

                                        <h:outputLabel value="#{alumnos.documento.nombre1} #{alumnos.documento.nombre2}"/>

                                    </h:column>

                                    <h:column>

                                        <f:facet name="header">#{textSupp.apellidoUsu}</f:facet>

                                        <h:outputLabel value="#{alumnos.documento.apellido1} #{alumnos.documento.apellido2}"/>

                                    </h:column>

                                    <h:column>

                                        <f:facet name="header">#{textSupp.estado}</f:facet>

                                        <h:outputLabel value="#{alumnos.documento.idEstadoUsuario.estado}"/>

                                    </h:column>

                                    <h:column>

                                        <f:facet name="header">#{textSupp.nivelCategoria}</f:facet>

                                        <h:outputLabel value="#{alumnos.idNivelCategoria.nombreNivel}"/>

                                    </h:column>

                                    <h:column>

                                        <f:facet name="header">#{textSupp.categoriaDeportiva}</f:facet>

                                        <h:outputLabel value="#{alumnos.idNivelCategoria.idCategoria.nombreCategoria}"/>

                                    </h:column>

                                </h:dataTable>

                            </div>

                        </div>
                        <!--Fin de la lista-->

                    </div>

                </div>

            </h:form>


            <!-- Modal -->
            <div class="modal fade row" id="modificar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog  modal-lg" role="document">
                    <div class="modal-content row">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">
                                #{textSupp.modificar}
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                X
                            </button>
                        </div>
                        <div class=" col-12">

                            <h:form class="container col-12" enctype="multipart/form-data">

                                <div class="row">

                                    <h:inputHidden value="#{usuariosController.profesor.idProfesor}"/>

                                    <div class=" col-12 bg-primary p-0  text-center text-ligh">
                                        <h:messages globalOnly="true" showDetail="true" 
                                                    styleClass="text-white pt-2"/>
                                    </div>


                                    <!--  Contenedor del formulario de incripcion  -->
                                    <div class="col-12 mt-4 text-ligh mx-auto">

                                        <div class="mb-3 row">
                                            <h:outputLabel for="image" class="col-12 text-center" value="#{textSupp.fotoPerfil}"/>
                                            <div class="col-12 col-lg-10 mx-auto">
                                                <h:graphicImage value="#{usuariosController.usuarios.fotoPerfil}" class="col-12 images-circular mb-1"/>
                                            </div>
                                            <div class="col-12 mx-auto text-center">
                                                <h:inputFile a:accept=".jpg" value="#{usuariosController.archivo.file}" 
                                                             id="image" label="#{textSupp.buscarImage}" required="true"/>
                                            </div>
                                            <h:messages for="image" showDetail="true"/>
                                        </div>

                                        <div class="mb-3">
                                            <h:outputLabel for="doc" value="#{textSupp.documentoI}: "/>
                                            <div class="row">
                                                <h:inputText class="form-control col-md-6 mx-auto" 
                                                             value="#{usuariosController.usuarios.documento}" 
                                                             id="doc" required="true"/>
                                                <h:selectOneMenu class="col-md-5" id="tipoDoc"
                                                                 value="#{usuariosController.tipoDoc.idTipoDoc}" required="true">
                                                    <f:selectItems 
                                                        value="#{usuariosController.listaTipoDoc}"
                                                        var="tipoDoc"
                                                        itemValue="#{tipoDoc.idTipoDoc}"
                                                        itemLabel="#{tipoDoc.topoDoc}"
                                                        />
                                                </h:selectOneMenu>
                                            </div>
                                            <h:messages for="doc" showDetail="true"/>
                                            <h:messages for="doc" showDetail="true"/>
                                        </div>

                                        <div class="mb-3">
                                            <h:outputLabel for="nombreU" value="#{textSupp.nombre}: "/>
                                            <h:inputText class="form-control" 
                                                         value="#{usuariosController.usuarios.nombre1}" 
                                                         id="nombreU" required="true"/>
                                            <h:messages for="nombreU" showDetail="true"/>
                                        </div>

                                        <div class="mb-3">
                                            <h:outputLabel for="nombreU2" value="#{textSupp.nombre} 2: "/>
                                            <h:inputText class="form-control" 
                                                         value="#{usuariosController.usuarios.nombre2}" 
                                                         id="nombreU2" />
                                            <h:messages for="nombreU2" showDetail="true"/>
                                        </div>

                                        <div class="mb-3">
                                            <h:outputLabel for="apellidoU" value="#{textSupp.apellidoUsu}: "/>
                                            <h:inputText class="form-control" 
                                                         value="#{usuariosController.usuarios.apellido1}" 
                                                         id="apellidoU" required="true"/>
                                            <h:messages for="apellidoU" showDetail="true"/>
                                        </div>

                                        <div class="mb-3">
                                            <h:outputLabel for="apellidoU2" value="#{textSupp.apellidoUsu} 2: "/>
                                            <h:inputText class="form-control" 
                                                         value="#{usuariosController.usuarios.apellido2}" 
                                                         id="apellidoU2"/>
                                            <h:messages for="apellidoU2" showDetail="true"/>
                                        </div>


                                        <div class="mb-3">
                                            <h:outputLabel for="fechaN" value="#{textSupp.fechaNacimiento}: "/>
                                            <h:inputText 
                                                value="#{usuariosController.usuarios.fechaNacimiento}" 
                                                a:type="date" class="form-control" id="fechaN">
                                                <f:convertDateTime pattern="yyyy-MM-dd"/>
                                            </h:inputText>
                                            <h:messages for="fechaN" showDetail="true"/>
                                        </div>



                                        <div class="custom-file mb-2 mt-2">
                                            <h:outputLabel for="eps" value="#{textSupp.eps}: "/>
                                            <h:selectOneMenu class="ml-1" 
                                                             value="#{usuariosController.eps.idEps}">
                                                <f:selectItems
                                                    var="listaE"
                                                    value="#{inscripcionController.epsL}"
                                                    itemLabel="#{listaE.nombreEps}"
                                                    itemValue="#{listaE.idEps}"
                                                    />
                                            </h:selectOneMenu>
                                            <h:messages for="eps" showDetail="true"/>
                                        </div>

                                        <div class="mb-2 mt-2">
                                            <h:outputLabel value="#{textSupp.tipoSangre}: " />
                                            <h:selectOneMenu class="ml-2 is-invalid" 
                                                             value="#{usuariosController.tipoSangre.idtipoSangre}">
                                                <f:selectItems 
                                                    var="listaRh"
                                                    value="#{usuariosController.listaTipoSangre}"
                                                    itemLabel="#{listaRh.rh}"
                                                    itemValue="#{listaRh.idtipoSangre}"
                                                    />
                                            </h:selectOneMenu>
                                        </div>

                                        <!-- Llenar la tbla de Rpofesor -->
                                        <div class="mb-2 mt-2">
                                            <h:outputLabel value="#{textSupp.Especialidad}: "  class="mr-1"/>
                                            <h:selectOneMenu value="#{usuariosController.especialidad.idEspecialidad}">

                                                <f:selectItems
                                                    value="#{inscripcionController.especialidadL}"
                                                    var="esp"
                                                    itemValue="#{esp.idEspecialidad}"
                                                    itemLabel="#{esp.nombreEspecialidad}"
                                                    />

                                            </h:selectOneMenu>
                                        </div>



                                        <div class="mb-3 text-center">
                                            <h:commandButton value="#{textSupp.RegistarP}"
                                                             class="btn btn-success"
                                                             action="#{usuariosController.actualizarProfesor()}"
                                                             />
                                        </div>


                                    </div>


                                </div>

                            </h:form>


                        </div>

                    </div>
                </div>
            </div>

        </h:body>

    </f:view>   
</html>
